<div class="login-container">
  <div class="login-card">
    <!-- Header -->
    <div class="login-header">
      <div class="login-icon">üë§</div>
      <h1 class="login-title">Crear Cuenta</h1>
      <p class="login-subtitle">Reg√≠strate para comenzar</p>
    </div>

    <!-- Server error -->
    <div *ngIf="serverError" class="alert alert-danger">{{ serverError }}</div>

    <!-- Form -->
    <form class="login-form" [formGroup]="form" (ngSubmit)="submit()" novalidate>
      <!-- Nombre Completo -->
      <div class="form-group">
        <label for="fullName" class="form-label">
          <span class="label-icon">üë§</span>
          Usuario
        </label>
        <input
          id="fullName"
          type="text"
          class="form-input"
          placeholder="Nombre de Usuario"
          formControlName="fullName"
          [class.invalid]="fullName.touched && fullName.invalid"
          autocomplete="name"
          required
        >
        <div class="field-error" *ngIf="fullName.touched && fullName.errors">
          <span *ngIf="fullName.errors['required']">El nombre es obligatorio.</span>
          <span *ngIf="fullName.errors['minlength']">M√≠nimo 2 caracteres.</span>
          <span *ngIf="fullName.errors['maxlength']">M√°ximo 20 caracteres.</span>
        </div>
      </div>

      <!-- Email -->
      <div class="form-group">
        <label for="email" class="form-label">
          <span class="label-icon">üìß</span>
          Correo Electr√≥nico
        </label>
        <input
          id="email"
          type="email"
          class="form-input"
          placeholder="tu@email.com"
          formControlName="email"
          [class.invalid]="email.touched && email.invalid"
          autocomplete="email"
          required
        >
        <div class="field-error" *ngIf="email.touched && email.errors">
          <span *ngIf="email.errors['required']">El email es obligatorio.</span>
          <span *ngIf="email.errors['email']">Formato de email inv√°lido.</span>
          <span *ngIf="email.errors['maxlength']">El email no puede tener m√°s de 100 caracteres.</span>
        </div>
      </div>

      <!-- Password -->
      <div class="form-group">
        <label for="password" class="form-label">
          <span class="label-icon">üîí</span>
          Contrase√±a
        </label>

        <div class="password-wrapper">
          <input
            id="password"
            [type]="showPass ? 'text' : 'password'"
            class="form-input form-input-with-eye"
            placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢"
            formControlName="password"
            [class.invalid]="password.touched && password.invalid"
            autocomplete="new-password"
            required
          >
          <button
            type="button"
            class="eye"
            (click)="toggleShowPass()"
            aria-label="Mostrar u ocultar contrase√±a">
            <!-- ojo normal -->
            <svg *ngIf="!showPass" viewBox="0 0 24 24" width="20" height="20"
                 fill="none" stroke="currentColor" stroke-width="2"
                 stroke-linecap="round" stroke-linejoin="round">
              <path d="M1 12s4-7 11-7 11 7 11 7-4 7-11 7-11-7-11-7z"/>
              <circle cx="12" cy="12" r="3"/>
            </svg>
            <!-- ojo tachado -->
            <svg *ngIf="showPass" viewBox="0 0 24 24" width="20" height="20"
                 fill="none" stroke="currentColor" stroke-width="2"
                 stroke-linecap="round" stroke-linejoin="round">
              <path d="M17.94 17.94A10.94 10.94 0 0 1 12 19c-7 0-11-7-11-7a21.77 21.77 0 0 1 5.06-5.94"/>
              <path d="M1 1l22 22"/>
              <path d="M9.88 9.88A3 3 0 0 0 12 15a3 3 0 0 0 3-3"/>
            </svg>
          </button>
        </div>

        <!-- Checklist de requisitos -->
        <ul class="pw-checklist">
          <li [class.ok]="passChecks.len">M√≠nimo 6 caracteres</li>
          <li [class.ok]="passChecks.upper">Al menos 1 may√∫scula</li>
          <li [class.ok]="passChecks.lower">Al menos 1 min√∫scula</li>
          <li [class.ok]="passChecks.numOrSymbol">N√∫mero o s√≠mbolo</li>
        </ul>

        <div class="field-error" *ngIf="password.touched && password.errors">
          <span *ngIf="password.errors['required']">La contrase√±a es obligatoria.</span>
          <span *ngIf="password.errors['minlength']">Debe tener al menos 6 caracteres.</span>
          <span *ngIf="password.errors['maxlength']">No puede tener m√°s de 50 caracteres.</span>
          <span *ngIf="password.errors['weakPassword']">
            Debe incluir may√∫scula, min√∫scula y n√∫mero o s√≠mbolo.
          </span>
        </div>
      </div>

      <!-- Confirm Password -->
      <div class="form-group">
        <label for="confirmPassword" class="form-label">
          <span class="label-icon">‚úÖ</span>
          Confirmar Contrase√±a
        </label>
        <input
          id="confirmPassword"
          type="password"
          class="form-input"
          placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢"
          formControlName="confirmPassword"
          [class.invalid]="(confirmPassword.touched && confirmPassword.invalid) || form.hasError('passwordsMismatch')"
          autocomplete="new-password"
          required
        >
        <div class="field-error"
             *ngIf="confirmPassword.touched && (confirmPassword.errors || form.hasError('passwordsMismatch'))">
          <span *ngIf="confirmPassword.errors?.['required']">
            Confirmar contrase√±a es obligatorio.
          </span>
          <span *ngIf="form.hasError('passwordsMismatch')">
            Las contrase√±as no coinciden.
          </span>
        </div>
      </div>

      <!-- Terms & Conditions -->
      <div class="form-options">
        <label class="remember-me">
          <input type="checkbox" class="checkbox" formControlName="terms">
          <span class="checkmark"></span>
          Acepto los t√©rminos y condiciones.
        </label>
        <div class="field-error" *ngIf="terms.touched && terms.errors?.['required']">
          Debes aceptar los t√©rminos.
        </div>
      </div>

      <!-- Submit -->
      <button type="submit" class="login-button" [disabled]="loading || form.invalid">
        {{ loading ? 'Registrando...' : 'Registrarse' }}
      </button>
    </form>

    <!-- Footer -->
    <div class="login-footer">
      ¬øYa tienes cuenta?
      <div class="signup-link"
           routerLink="/auth/login"
           routerLinkActive="active-b"
           [routerLinkActiveOptions]="{exact: true}">
        <span>Inicia sesi√≥n aqu√≠</span>
      </div>
    </div>
  </div>
</div>
